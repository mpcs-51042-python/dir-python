{"title":"Arguments","markdown":{"headingText":"Arguments","containsRefs":false,"markdown":"\nWhile sometimes we can write a function that takes no arguments, usually we'll want to parameterize a function.\n\nWe call the variables that are passed in to a function *arguments* or *parameters*.\n\n## Passing Arguments\n\nIn some languages, you can pass arguments by value or by reference.\nIn Python all values are \"passed by assignment\".\n\n```python\ndef func(a, b):\n    ...\n    \nx = 7\ny = [1, 2, 3]\nfunc(x, y)\n\n# you can think of the function starting with assignments to its parameters\na = x\nb = y\n```\n\nThis means mutability determines whether or not a function can modify a parameter in the outer scope.\n\nUnless otherwise specified, function arguments are **required**, and can be passed either **by position** or **by name**.\n\nAs we will see, we can also make optional arguments, as well as arguments that can only be passed by position or by name.\n\n```python\ndef calculate_cost(items, tax):\n    pass\n\n# all arguments passed by position\ncalculate_cost([\"salmon\", \"eggs\", \"bagels\"], 0.05)\n# tax passed by name\ncalculate_cost([\"salmon\", \"eggs\", \"bagels\"], tax=0.05)\n```\n\n## Optional Arguments\n\nPython allows default values to be assigned to function parameters.\n\nArguments with default values are not required.  Passed in values will override default.\n\n```{python}\n#| tags: []\n# default arguments\ndef is_it_freezing(temp, is_celsius=True):\n    if is_celsius:\n        freezing_line = 0\n    else:\n        freezing_line = 32\n    return temp < freezing_line\n```\n\n```{python}\n#| tags: []\nprint(is_it_freezing(65))\nprint(is_it_freezing(30))\nprint(is_it_freezing(30, False))\nprint(is_it_freezing(-1, is_celsius=True))\n```\n\nYou can have as many optional parameters as you wish, but they must all come after any required parameters.\n\n```python\n# intentional error\ndef bad_function(a, b=\"spam\", c):\n    pass\n```\n\n## Argument Matching\n\nThere are two important rules in determining which arguments matched to which parameters:\n\n- Positional arguments are matched from left to right.\n- Keywords matched by name.\n\n```{python}\n#| scrolled: true\n# print() as an example [call help to see docstring]\nhelp(print)\n```\n\n```{python}\nprint(\"hello\", \"positional\", \"world\", sep=\"~\", end=\";\")\n```\n\n## keyword and positional-only arguments\n\nIncluding a bare `*` as a parameter means everything after can only be passed by keyword.\n\n\nFor example:\n\n```{python}\ndef request_page(\n    url,\n    verify,\n    cache=True,\n    retry_if_fail=False,\n    send_cookies=False,\n    https_only=True):\n    pass\n\nrequest_page(\"https://example.com\", True, False, True, False)\n# or did you mean\nrequest_page(\"https://example.com\", True, False, False, True)\n```\n\n```python\n# instead, use keyword-only\ndef request_page(url, *, verify, follow_redirects=False, cache=True, send_cookies=False, https_only=True):\n    pass\n\n# forces keyword parameters\n# & allows you to change the function definition leter\nrequest_page(\"https://example.com\", verify=True)\n```\n\nIncluding a bare `/` means everything beforehand is positional only:\n\n```{python}\ndef pos_only(x1, x2, /):\n    print(x1, x2)\n```\n\n```{python}\npos_only(\"hello\", \"world\")\n```\n\n```python\n# ERROR: not allowed\npos_only(x1=\"hello\", x2=\"world\")\n```\n\n## Variable Length Arguments\n\nSometimes we want a function that can take any number of parameters (seen above in `print`).\n\nCollect arbitrary positional arguments with `*param_name`. (Often `*args`)\n\nCollect arbitrary named arguments with `**param_name`. (Often `**kwargs`)\n\n```{python}\n# *args example\n\ndef add_many(*args):\n    #print(args, type(args))\n    total = 0\n    for num in args:\n        total += num\n    return total\n```\n\n```{python}\nadd_many(1, 2, 3, 4, 5)\n```\n\n\n```{python}\n# **kwargs example\n\ndef show_table(**kwargs):\n    for name, val in kwargs.items():\n        print(f\"{name:>10} | {val}\")\n        \n```\n\n(Using advanced string formatting, see <https://docs.python.org/3/library/string.html#formatstrings>)\n\n\n```{python}\nshow_table(spam=100, eggs=12, other=42.0)\n```\n\n```{python}\n# combining args & kwargs\ndef func(a, *args, n=5, **kwargs):\n    print(a, args, n, kwargs, sep=\"\\n\")\n\nfunc(1, 2, 3, 4, c=1, b=2)\n```\n\n```python\n# ERROR: why?\nfunc(x=7, x=8)\n```\n\n```{python}\nfunc(1, 2, 3, rest=5)\n```\n\n```{python}\n# some built-in functions work this way as well\nmax(1, 2, 3, 4)\n```\n\n## Unpacking/Splatting\n\n`*` and `**` are also known as unpacking or splatting operators.\n\nWhen in a function signature, they coalesce arguments into a `tuple` and `dict` as we've seen.\n\nWhen used on a parameter when calling a function, they \"unpack\" the values from a sequence or dict.\n\n```{python}\ndef takes_many(a, b, c, d):\n    print(f\"{a=} {b=} {c=} {d=}\")\n\n# any iterable can be splatted\nthree = [\"A\", \"B\", \"C\"]\nfour = (1, 2, 3, 4)\nfive = (False, False, False, False, False)\n```\n\n```{python}\ntakes_many(*four)\n```\n\n```{python}\ntakes_many(*three, 4)\n```\n\n```{python}\ntakes_many(4, *three)\n```\n\n```python\n# ERROR\ntakes_many(*five)\n```\n\n```{python}\n# double-splat, unpack a dictionary into keyword args\nkeywords = {\"a\": \"sun\", \"c\": \"venus\", \"b\": \"mars\"}\ntakes_many(**keywords, d=\"moon\")\n```\n\n\n```{python}\n#| tags: []\nimport math\n\n\ndef distance(x1, y1, x2, y2):\n    \"\"\"\n    Find distance between two points.\n    \n    Inputs:\n        point1: 2-element tuple (x, y)\n        point2: 2-element tuple (x, y)\n\n    Output: Distance between point1 and point2 (float).\n    \"\"\"\n    return math.sqrt(math.pow(x2-x1, 2) + math.pow(y2-y1, 2))\n```\n\n```{python}\n#| tags: []\n# we can use sequence-unpacking to turn tuples/lists into multiple arguments\na = (3, 4)\nb = [5, 5]\ndistance(*a, *b) # our 2 parameters become 4\n```\n\n```{python}\na = [1,2,3,4]\na[0:2], a[2:]\n```\n\n```python\nhttp_params = {\"verify\": False, \"https_only\": True, \"timeout_sec\": 3}\nrequest_page(\"http://example.com\", **http_params)\n```\n\n```{python}\ndef fn1(url, kw1=None, kw2=None, kw3=None):\n    ...\n    \ndef fn2(url, **kwargs):\n    if is_valid(url):\n        kwargs[\"additional_arg\"] = 4\n        return fn1(url, **kwargs)\n    return None\n    \n```\n\n## Caveat: Mutable Default Arguments\n\nAn important rule to remember is that the declaration (`def` statement) of a function is only evaluated once, not every time the function is called.\n\nThis can lead to surprising behavior at first.\nIt is important to understand & remember that only the inner-block of a function is executed on each call.\n\nThis is a common cause of bugs when a mutable is a part of the default arguments.\n\n```{python}\ndef add_many(item, n, base_list=[]):\n    print(\"adding to\", id(base_list))\n    base_list.extend([item] * n)\n    return base_list\n```\n\n```{python}\n# passing in a list for base_list works as expected...\nanimals = [\"cow\"]\nprint(\"animals id\", id(animals))\nadd_many(\"bear\", 3, animals)\nadd_many(\"fish\", 5, animals)\nprint(animals)\n```\n\n```{python}\n#| tags: []\n# let's invoke without a base_list parameter\nanimals2 = add_many(\"dog\", 3)\nprint(animals2)\n```\n\n```{python}\n#| tags: []\nanimals3 = add_many(\"turtle\", 4)\nprint(animals3)\n```\n\n```{python}\n#| tags: []\nanimals2\n```\n\n\n```{python}\n#| tags: []\nanimals2 is animals3\n```\n\nThe correct pattern is to **avoid mutable defaults** and instead assign a fresh\nmutable within the function as needed:\n\n\n```{python}\n# fixed version\ndef add_many(item, n, base_list=None):\n    if base_list is None:\n        base_list = []\n    base_list.extend([item] * n)\n    return base_list\n```\n\n```{python}\ntemp = []\nprint(id(temp))\nreturned = add_many(\"fish\", 3)\nprint(returned)\nprint(id(returned))\n```\n\nThis is not a bug per se, but a somewhat unfortunate side effect of how Python proceses statements and handles mutables.\n\nThere *are* times when it can be used to your advantage.\n\nIn the below example, the `cache_dict` persists between calls, allowing it to be used\nas a sort of cache/memory for the calling function.\n This should only be done thoughtfully and with ample commenting to explain the intended behavior.\n\n```{python}\ndef add_cached(x, y, cache_dict={}):\n    print(cache_dict)\n    if (x, y) not in cache_dict:\n        print(\"did calculation\", x, y)\n        cache_dict[x, y] = x + y\n    return cache_dict[x, y]\n```\n\n```{python}\nadd_cached(4, 5)\n```\n\n```{python}\nadd_cached(6, 10)\n```\n\n```{python}\n# will use cache\nadd_cached(4, 5)\n```\n\n\n## Discussion\n\n### What types are `args` and `kwargs`?\n\n### When should you use defaults, name-only, positional-only?\n\nYour function provides an \"interface\" for other programmers to interact with.\n\nProper choices help other programmers understand how to call your functions and should be chosen to make things easier for others.\n\nWhat would you prefer?\n\n`get(\"https://example.com\", [500, 501, 503], 2.5, 2, False)`\n\nor\n\n`get(\"https://example.com\", retry_if=[500, 501, 503], timeout_sec=2.5, retries=2, verify_ssl=False)`\n\n**Always consider \"future you\" among those hypothetical \"other programmers\".**\n\n### Examples\n\n```{python}\n# two required args\ndef f(x, y):\n    print(f\"{x=} {y=}\")\n```\n\n```{python}\n# a default argument\ndef g(x, y=3):\n    print(f\"{x=} {y=}\")\n```\n\n```{python}\n# all default args\ndef h(x=\"abc\", y=3, z=True):\n    print(f\"{x=} {y=} {z=}\")\n```\n\n```{python}\n# mixture of arg types\ndef j(x, *args, y=3, **kwargs):\n    print(f\"{x=} {y=} {args=} {kwargs=}\")\n```\n\n```python\n\n# 1.\nf()\n\n# 2.\nf(x=1, 2)\n\n# 3.\nd = {\"x\": 0, \"y\": 0}\nf(**d)\n\n# 4.\ng(**d)\n\n# 5.\ng(**d, x=2)\n\n# 6.\ng(x=1)\n\n# 7.\nh()\n\n# 8.\nh(**d)\n\n# 9.\nh(z=False, **d)\n\n# 10.\nj(1, 2, 3, 4, 5, 6, 7)\n\n# 11.\nj(**d)\n\n# 12.\nt = (9, 9, 9, 9, 9, 9)\nj(t)\n\n# 13.\nj(*t)\n```\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["include-code-files"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.26","number-depth":1,"theme":"yeti"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}