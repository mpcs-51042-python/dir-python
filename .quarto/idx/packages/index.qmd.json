{"title":"Python Packages","markdown":{"yaml":{"filters":["include-code-files"]},"headingText":"Python Packages","containsRefs":false,"markdown":"\n\n---\n\n**Goals**\n\n- Review Python's `import` statement and how it relates to packages & libraries.\n- Introduce the structure of a standard Python application.\n\n---\n\n## Terminology\n\nBefore we get started, it is probably helpful to review some terminology:\n\nPython **modules** are single `.py` files.\nModules are a useful way to group related code, you may keep all code related to the database in a `db.py` file and everything related to the user interface in a `ui.py` file.\n\nPython **packages** are one or more .py files, typically in a directory.\nYou will sometimes here these referred to as **libraries** when they are meant to be used by other developers.\nSome packages you've already seen would be built-in ones like `math` or `pathlib`, or third-party packages like `pandas` and `pytest`.\n\nFinally, Python **applications** are packages that are meant to be run.  A package may be useful as a library as well as an application.\n\nFor example, Python's built in `http` library allows one to work with the HTTP protocol in their own code, but it also contains an application that will let you\nstart an HTTP server:\n\n```shell\n$ python3 -m http.server\n```\n\nWill start a local web server making the contents of the current directory available at `http://localhost:8000`.\n\n## How do packages work?\n\nA Python package is typically a directory containing one or more .py files.\n\nAn example project layout might look like this:\n\n```\nbaking-pkg\n├── baking\n│   ├── __init__.py\n│   ├── cli.py\n│   ├── ingredients.py\n│   ├── sizes.py\n│   ├── units.py\n│   └── utils.py\n├── LICENSE\n├── README.md\n└── tests\n    ├── test_baking.py\n    ├── test_units.py\n    └── test_utils.py\n```\n\nThe package is the directory `baking`.\nThe inclusion of an (often empty) `__init__.py` marks the directory as a package.\n\nThis hypothetical library would be imported via `import baking`.\nOr there could be nested imports such as `from baking.units import Liter`.\n(Remember: the slashes in paths become dots when we're using Python paths.)\n\n## Imports and sys.path\n\nWhen you type `import baking`, Python will not immediately find the package.\n\nPython has what we often refer to as a **search path**.\nWhen you import something, Python searches a list of directories for a package or module with that name.\n\nIn Python's case the special variable `sys.path` is a list of strings that make up the search path.\n\nExecuting the code: \n```python\nimport sys\n\nfor p in sys.path:\n    print(p)\n```\n\nMight output something like:\n\n```\n/opt/python@3.13/Python/Versions/3.13/lib/python313.zip\n/opt/python@3.13/Python/Versions/3.13/lib/python3.13\n/opt/python@3.13/Python/Versions/3.13/lib/python3.13/lib-dynload\n/opt/python3.13/site-packages\n```\n\nOn your system it will vary, but this shows the list of directories that Python will search when you type `import baking`.\n\nIf it finds a `baking/__init__.py` or `baking.py` it will execute it and stop the search.\nIf it checks them all without success, it raises an `ImportError`.\n\n\n## Imports & Relative Imports\n\nNow's a good time to review the different ways you can import modules and packages.\n\n`import module_name` \n\nImports the module and makes it available in the current namespace.  You can access the module's functions by prefixing them with the module name.  For example, for the module `math` with a function called `sin`, you can access it by calling `math.sin()`.\n\n`from module_name import module_attr`\n\nImports a specific attribute from a module and makes it available in the current namespace.  For example, `from math import sin` will import the `sin` function from the `math` module and make it available in the current namespace.  You can then call it directly by calling `sin()`.\n\n`import module_name as alias` or `from module_name import module_attr as alias`\n\nImports a module or attribute and gives it an alias.  For example, `import pandas as pd` will import the `pandas` module and make it available as `pd`.  You can then access the `DataFrame` class as `pd.DataFrame`. This is commonly used in data science libraries (`import numpy as np`, `import pandas as pd`, etc) but overuse can make code harder to read. It's best to use aliases sparingly.\n\n`from module import *`\n\nMakes full contents of module available in the current namespace.\n\n### Why we don't use `import *` in our programs.\n\nMost style guides for large projects ban `import *`. Consider it banned in this course as well.\n\nIt breaks a very nice feature of Python that you may take for granted if you've never used another language.\nTypically, if you see a symbol like `BASE_URL`  or `download` used in a file you are guaranteed it is either declared in that file, or you can \nlook at the import statements and discover where it came from.\n\n`import *` breaks this rule, making it difficult to track down where a symbol came from, especially if there is more than one star import.\n\nThis also can lead to bugs:\n\n```python\nfrom math import *\nfrom travel import *\n\n...\n\ndist(chicago, philadelphia)\n```\n\nDoes this use `math.dist`'s euclidean distance or a function named `dist` defined within `travel`?\n\nThe answer would vary based on changes to the other files or re-ordering the imports.\nThat's a confusing bug just waiting to happen.\n\n:::{.callout-note}\n### Can we ever use `import *`?\n\nIt is OK to use `import *` in one-off scripts that nobody else will maintain, or more commonly, in the REPL.\n\nSince these are short-lived invocations there is minimal chance of confusion, and you aren't creating a maintenance nightmare for anybody.\n:::\n\n### Relative Imports\n\nWhen working with packages, we have the option to also use **relative imports**.\n\nThese imports allow you to refer to other files from the same package without specifying the full path.\n\nLet's imagine a larger project with a few sub-packages:\n\n```\nboard_game\n├── __init__.py\n├── ui\n│   ├── __init__.py\n│   ├── gui.py\n│   └── images.py\n├── network\n│   ├── __init__.py\n│   ├── high_score.py\n│   └── matchmaking.py\n└── logic\n    ├── __init__.py\n    ├── rules.py\n    └── scoring.py\n```\n\nWith traditional **absolute imports**, code within `board_game/ui/gui.py` would need to import\nother packages by their full path:\n\n```python\n# within board_game/ui/gui.py\nfrom board_game.ui.images import Piece\nfrom board_game.logic.scoring import check_victory\n```\n\nRelative imports offer an alternative that is less repetitious:\n\n```python\n# within board_game/ui/gui.py\nfrom .images import Piece\nfrom ..logic.scoring import check_victory\n```\n\nIn this example `.images` refers to the file `images.py` which is in the same directory as `gui.py`, which is why the import starts with a `.`.\n\nThen `..logic.scoring` traverses up a directory (from `ui/` to `logic/`) and then imports the `scoring.py` file.\n\n## Creating application entrypoints\n\nWhen a package is imported, the `.py` file is executed, so if a file contained:\n\n```python\n# tlprint.py\nprint(\"debug statment inside baking2\")\n\ndef some_func(...):\n    ...\n```\n\nWhether you executed `import tlprint` or `from tlprint import some_func`, you would see the output of the `print` function since the entire file needs to be executed to complete the import.\n\nIf you have code that you only want to be run when the `.py` file is executed as a program, you can put it in a special block:\n\n```python\n# main_demo.py\ndef some_func(...):\n    ...\n\nif __name__ == \"__main__\":\n    print(\"run as a program\")\n```\n\nThe statement `if __name__ == \"__main__\"` checks a special built-in variable named `__name__` that contains the name of the imported module.\n\nIf the module is imported the normal way, this condition will be false, but if the program is executed from the command line via either:\n\n```shell\n$ python3 main_demo.py\n```\nor\n```shell\n$ python3 -m main_demo\n```\n\nThe special variable `__name__` will be set to `__main__`, indicating that it is being run as a program, not imported as a library.\n\n### Command Line Arguments\n\nWhichever way you run a Python module, you can pass command line arguments to it.\n\n\nThese arguments wind up in a special list called `sys.argv`. \nThe first element `sys.argv[0]` is the name of the module.  \nThe second element is the first command line argument, and so on.\n\nIf you take the file `argdemo.py`:\n\n\n```{.python include=\"argdemo.py\"}\n```\n\nExecuting it lets you see how `argv` works in practice:\n\n```shell\n$ python3 argdemo.py -k filename.txt \nprogram name: argdemo.py\nargv[1]: -k\nargv[2]: filename.txt\n```\n\nYour program could then use the contents of `sys.argv` however you wanted.\n\n## Further Exploration\n\n### Packages & Modules\n\n* [Official Python Tutorial on Modules & Packages](https://docs.python.org/3/tutorial/modules.html)\n* [Python Language Reference: The import system](https://docs.python.org/3/reference/import.html).\n\n### Argument Parsing\n\nIn practice, parsing `sys.argv` yourself is limiting.\n\nIf you'd like to write programs that take many options like `ls`, `cd`, and `git` you will benefit from using a package to manage the parameters.\n\nSome common libraries include:\n\n* [`argparse`](https://docs.python.org/3/library/argparse.html) - Built in to Python, but a bit verbose for larger applications.\n* [`click`](https://click.palletsprojects.com/) - Popular and easy to get started with.\n* [`typer`](https://typer.tiangolo.com/) - Built on top of `click` and uses type annotations to generate help text.\n* [`docopt`](http://docopt.org/) - A novel approach using a docstring to define arguments.\n","srcMarkdownNoYaml":"\n# Python Packages\n\n---\n\n**Goals**\n\n- Review Python's `import` statement and how it relates to packages & libraries.\n- Introduce the structure of a standard Python application.\n\n---\n\n## Terminology\n\nBefore we get started, it is probably helpful to review some terminology:\n\nPython **modules** are single `.py` files.\nModules are a useful way to group related code, you may keep all code related to the database in a `db.py` file and everything related to the user interface in a `ui.py` file.\n\nPython **packages** are one or more .py files, typically in a directory.\nYou will sometimes here these referred to as **libraries** when they are meant to be used by other developers.\nSome packages you've already seen would be built-in ones like `math` or `pathlib`, or third-party packages like `pandas` and `pytest`.\n\nFinally, Python **applications** are packages that are meant to be run.  A package may be useful as a library as well as an application.\n\nFor example, Python's built in `http` library allows one to work with the HTTP protocol in their own code, but it also contains an application that will let you\nstart an HTTP server:\n\n```shell\n$ python3 -m http.server\n```\n\nWill start a local web server making the contents of the current directory available at `http://localhost:8000`.\n\n## How do packages work?\n\nA Python package is typically a directory containing one or more .py files.\n\nAn example project layout might look like this:\n\n```\nbaking-pkg\n├── baking\n│   ├── __init__.py\n│   ├── cli.py\n│   ├── ingredients.py\n│   ├── sizes.py\n│   ├── units.py\n│   └── utils.py\n├── LICENSE\n├── README.md\n└── tests\n    ├── test_baking.py\n    ├── test_units.py\n    └── test_utils.py\n```\n\nThe package is the directory `baking`.\nThe inclusion of an (often empty) `__init__.py` marks the directory as a package.\n\nThis hypothetical library would be imported via `import baking`.\nOr there could be nested imports such as `from baking.units import Liter`.\n(Remember: the slashes in paths become dots when we're using Python paths.)\n\n## Imports and sys.path\n\nWhen you type `import baking`, Python will not immediately find the package.\n\nPython has what we often refer to as a **search path**.\nWhen you import something, Python searches a list of directories for a package or module with that name.\n\nIn Python's case the special variable `sys.path` is a list of strings that make up the search path.\n\nExecuting the code: \n```python\nimport sys\n\nfor p in sys.path:\n    print(p)\n```\n\nMight output something like:\n\n```\n/opt/python@3.13/Python/Versions/3.13/lib/python313.zip\n/opt/python@3.13/Python/Versions/3.13/lib/python3.13\n/opt/python@3.13/Python/Versions/3.13/lib/python3.13/lib-dynload\n/opt/python3.13/site-packages\n```\n\nOn your system it will vary, but this shows the list of directories that Python will search when you type `import baking`.\n\nIf it finds a `baking/__init__.py` or `baking.py` it will execute it and stop the search.\nIf it checks them all without success, it raises an `ImportError`.\n\n\n## Imports & Relative Imports\n\nNow's a good time to review the different ways you can import modules and packages.\n\n`import module_name` \n\nImports the module and makes it available in the current namespace.  You can access the module's functions by prefixing them with the module name.  For example, for the module `math` with a function called `sin`, you can access it by calling `math.sin()`.\n\n`from module_name import module_attr`\n\nImports a specific attribute from a module and makes it available in the current namespace.  For example, `from math import sin` will import the `sin` function from the `math` module and make it available in the current namespace.  You can then call it directly by calling `sin()`.\n\n`import module_name as alias` or `from module_name import module_attr as alias`\n\nImports a module or attribute and gives it an alias.  For example, `import pandas as pd` will import the `pandas` module and make it available as `pd`.  You can then access the `DataFrame` class as `pd.DataFrame`. This is commonly used in data science libraries (`import numpy as np`, `import pandas as pd`, etc) but overuse can make code harder to read. It's best to use aliases sparingly.\n\n`from module import *`\n\nMakes full contents of module available in the current namespace.\n\n### Why we don't use `import *` in our programs.\n\nMost style guides for large projects ban `import *`. Consider it banned in this course as well.\n\nIt breaks a very nice feature of Python that you may take for granted if you've never used another language.\nTypically, if you see a symbol like `BASE_URL`  or `download` used in a file you are guaranteed it is either declared in that file, or you can \nlook at the import statements and discover where it came from.\n\n`import *` breaks this rule, making it difficult to track down where a symbol came from, especially if there is more than one star import.\n\nThis also can lead to bugs:\n\n```python\nfrom math import *\nfrom travel import *\n\n...\n\ndist(chicago, philadelphia)\n```\n\nDoes this use `math.dist`'s euclidean distance or a function named `dist` defined within `travel`?\n\nThe answer would vary based on changes to the other files or re-ordering the imports.\nThat's a confusing bug just waiting to happen.\n\n:::{.callout-note}\n### Can we ever use `import *`?\n\nIt is OK to use `import *` in one-off scripts that nobody else will maintain, or more commonly, in the REPL.\n\nSince these are short-lived invocations there is minimal chance of confusion, and you aren't creating a maintenance nightmare for anybody.\n:::\n\n### Relative Imports\n\nWhen working with packages, we have the option to also use **relative imports**.\n\nThese imports allow you to refer to other files from the same package without specifying the full path.\n\nLet's imagine a larger project with a few sub-packages:\n\n```\nboard_game\n├── __init__.py\n├── ui\n│   ├── __init__.py\n│   ├── gui.py\n│   └── images.py\n├── network\n│   ├── __init__.py\n│   ├── high_score.py\n│   └── matchmaking.py\n└── logic\n    ├── __init__.py\n    ├── rules.py\n    └── scoring.py\n```\n\nWith traditional **absolute imports**, code within `board_game/ui/gui.py` would need to import\nother packages by their full path:\n\n```python\n# within board_game/ui/gui.py\nfrom board_game.ui.images import Piece\nfrom board_game.logic.scoring import check_victory\n```\n\nRelative imports offer an alternative that is less repetitious:\n\n```python\n# within board_game/ui/gui.py\nfrom .images import Piece\nfrom ..logic.scoring import check_victory\n```\n\nIn this example `.images` refers to the file `images.py` which is in the same directory as `gui.py`, which is why the import starts with a `.`.\n\nThen `..logic.scoring` traverses up a directory (from `ui/` to `logic/`) and then imports the `scoring.py` file.\n\n## Creating application entrypoints\n\nWhen a package is imported, the `.py` file is executed, so if a file contained:\n\n```python\n# tlprint.py\nprint(\"debug statment inside baking2\")\n\ndef some_func(...):\n    ...\n```\n\nWhether you executed `import tlprint` or `from tlprint import some_func`, you would see the output of the `print` function since the entire file needs to be executed to complete the import.\n\nIf you have code that you only want to be run when the `.py` file is executed as a program, you can put it in a special block:\n\n```python\n# main_demo.py\ndef some_func(...):\n    ...\n\nif __name__ == \"__main__\":\n    print(\"run as a program\")\n```\n\nThe statement `if __name__ == \"__main__\"` checks a special built-in variable named `__name__` that contains the name of the imported module.\n\nIf the module is imported the normal way, this condition will be false, but if the program is executed from the command line via either:\n\n```shell\n$ python3 main_demo.py\n```\nor\n```shell\n$ python3 -m main_demo\n```\n\nThe special variable `__name__` will be set to `__main__`, indicating that it is being run as a program, not imported as a library.\n\n### Command Line Arguments\n\nWhichever way you run a Python module, you can pass command line arguments to it.\n\n\nThese arguments wind up in a special list called `sys.argv`. \nThe first element `sys.argv[0]` is the name of the module.  \nThe second element is the first command line argument, and so on.\n\nIf you take the file `argdemo.py`:\n\n\n```{.python include=\"argdemo.py\"}\n```\n\nExecuting it lets you see how `argv` works in practice:\n\n```shell\n$ python3 argdemo.py -k filename.txt \nprogram name: argdemo.py\nargv[1]: -k\nargv[2]: filename.txt\n```\n\nYour program could then use the contents of `sys.argv` however you wanted.\n\n## Further Exploration\n\n### Packages & Modules\n\n* [Official Python Tutorial on Modules & Packages](https://docs.python.org/3/tutorial/modules.html)\n* [Python Language Reference: The import system](https://docs.python.org/3/reference/import.html).\n\n### Argument Parsing\n\nIn practice, parsing `sys.argv` yourself is limiting.\n\nIf you'd like to write programs that take many options like `ls`, `cd`, and `git` you will benefit from using a package to manage the parameters.\n\nSome common libraries include:\n\n* [`argparse`](https://docs.python.org/3/library/argparse.html) - Built in to Python, but a bit verbose for larger applications.\n* [`click`](https://click.palletsprojects.com/) - Popular and easy to get started with.\n* [`typer`](https://typer.tiangolo.com/) - Built on top of `click` and uses type annotations to generate help text.\n* [`docopt`](http://docopt.org/) - A novel approach using a docstring to define arguments.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["include-code-files"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.26","number-depth":1,"theme":"yeti"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}