<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>19&nbsp; Data Structures – `dir(python)`</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../testing/index.html" rel="next">
<link href="../packages/index.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-8a1abf3b56f0fb35c20bbdbe101e9af5.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta name="twitter:title" content="19&nbsp; Data Structures – dir(python)">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="python-list.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../data-structures/index.html">Odds &amp; Ends</a></li><li class="breadcrumb-item"><a href="../data-structures/index.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Data Structures</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../"><code>dir(python)</code></a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Python Overview</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../what-is-python/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">What is Python?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../running-python/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Running Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../variables/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Variables &amp; Expressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statements/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Statements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../collections/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Collections</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../identity/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Identity &amp; References</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Understanding Functions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../arguments/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Arguments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../functional/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../comprehensions/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Comprehensions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../generators/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Generators</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../scope/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Scope</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../decorators/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Decorators</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Modules &amp; Objects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../oop/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Object-Oriented Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../inheritance/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Inheritance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../exceptions/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Exceptions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pdm/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Python Data Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../more-classes/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Class Methods &amp; Properties</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../packages/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Python Packages</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Odds &amp; Ends</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data-structures/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Data Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../testing/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Testing</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../files/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Files &amp; Paths</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#what-are-data-structures" id="toc-what-are-data-structures" class="nav-link active" data-scroll-target="#what-are-data-structures">What are data structures?</a></li>
  <li><a href="#arrays" id="toc-arrays" class="nav-link" data-scroll-target="#arrays">Arrays</a>
  <ul class="collapse">
  <li><a href="#pythons-list" id="toc-pythons-list" class="nav-link" data-scroll-target="#pythons-list">Python’s <code>list</code></a></li>
  </ul></li>
  <li><a href="#linked-lists" id="toc-linked-lists" class="nav-link" data-scroll-target="#linked-lists">Linked Lists</a>
  <ul class="collapse">
  <li><a href="#linked-list-vs.-array" id="toc-linked-list-vs.-array" class="nav-link" data-scroll-target="#linked-list-vs.-array">Linked List vs.&nbsp;Array</a></li>
  </ul></li>
  <li><a href="#stacks" id="toc-stacks" class="nav-link" data-scroll-target="#stacks">Stacks</a>
  <ul class="collapse">
  <li><a href="#call-stack-example" id="toc-call-stack-example" class="nav-link" data-scroll-target="#call-stack-example">Call Stack Example</a></li>
  <li><a href="#example-implementation" id="toc-example-implementation" class="nav-link" data-scroll-target="#example-implementation">Example Implementation</a></li>
  </ul></li>
  <li><a href="#queues" id="toc-queues" class="nav-link" data-scroll-target="#queues">Queues</a>
  <ul class="collapse">
  <li><a href="#example-implementation-1" id="toc-example-implementation-1" class="nav-link" data-scroll-target="#example-implementation-1">Example Implementation</a></li>
  <li><a href="#testing-queue-performance" id="toc-testing-queue-performance" class="nav-link" data-scroll-target="#testing-queue-performance">Testing Queue Performance</a></li>
  <li><a href="#queue-performance" id="toc-queue-performance" class="nav-link" data-scroll-target="#queue-performance">Queue Performance</a></li>
  </ul></li>
  <li><a href="#hash-tables" id="toc-hash-tables" class="nav-link" data-scroll-target="#hash-tables">Hash Tables</a>
  <ul class="collapse">
  <li><a href="#hashing" id="toc-hashing" class="nav-link" data-scroll-target="#hashing">Hashing</a></li>
  <li><a href="#collisions" id="toc-collisions" class="nav-link" data-scroll-target="#collisions">Collisions</a></li>
  <li><a href="#collision-resolution" id="toc-collision-resolution" class="nav-link" data-scroll-target="#collision-resolution">Collision Resolution</a></li>
  <li><a href="#resizing-rehashing" id="toc-resizing-rehashing" class="nav-link" data-scroll-target="#resizing-rehashing">Resizing &amp; Rehashing</a></li>
  <li><a href="#hash-table-performance" id="toc-hash-table-performance" class="nav-link" data-scroll-target="#hash-table-performance">Hash Table Performance</a></li>
  <li><a href="#polynomial-hash-function" id="toc-polynomial-hash-function" class="nav-link" data-scroll-target="#polynomial-hash-function">Polynomial Hash Function</a></li>
  </ul></li>
  <li><a href="#further-exploration" id="toc-further-exploration" class="nav-link" data-scroll-target="#further-exploration">Further Exploration</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../data-structures/index.html">Odds &amp; Ends</a></li><li class="breadcrumb-item"><a href="../data-structures/index.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Data Structures</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-data-structures" class="quarto-section-identifier"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Data Structures</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<script async="" src="https://plausible.io/js/pa-hgzE0cXTE_eyyQ7LddSDg.js"></script>
<hr>
<p><strong>Goals</strong></p>
<ul>
<li>Explore the differences between <strong>lists &amp; arrays</strong> for sequential data structures.</li>
<li>Examine how implementation choices can affect performance using <strong>stacks &amp; queues</strong>.</li>
<li>Learn how to implement <strong>hash tables</strong>, the data structure that powers Python’s <code>dict</code>.</li>
</ul>
<hr>
<section id="what-are-data-structures" class="level2">
<h2 class="anchored" data-anchor-id="what-are-data-structures">What are data structures?</h2>
<p>Data structures are ways of organizing data in working memory. They are not purely <em>inventions</em> of computer science, but reflect real-world patterns of organizing information.</p>
<p>Data structures like <strong>stacks</strong>, <strong>queues</strong>, and <strong>trees</strong> mimic the way we already think about the world.</p>
<p>A stack of documents on a desk has the same properties as the stack data structure: the first document finds its way to the bottom of the stack as new ones come in &amp; the document on the top of the stack gets your attention. The queue data structure even more clearly behaves its real-world counterpart: standing in a line being processed by order of arrival is a regular occurrence. And trees map to all kinds of hierarchical relationships: genealogy, organizational structure, file systems, HTML.</p>
<p>Data structures help us model real-world scenarios and play an essential role in writing performant programs. As we’ll see, the choice of data structure can often make a big difference in the complexity class of an algorithm.</p>
</section>
<section id="arrays" class="level2">
<h2 class="anchored" data-anchor-id="arrays">Arrays</h2>
<p>We’ll start by looking at one of the most fundamental data structures: <strong>arrays</strong>.</p>
<p>Arrays are collections of items that are stored in <em>contiguous memory</em>.</p>
<p>The RAM in your computer can be thought of as a sequential set of boxes that can store individual values. The operating system and programming language assign these blocks to your program as it requires memory for variables.</p>
<p>If you were running a Python program with variables:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"Hello"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">100</span><span class="op">*</span><span class="dv">100</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">36912</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>A snapshot of that memory might look like:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Address</th>
<th>Owned by</th>
<th>Contents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0x7000-0x8000</td>
<td>Safari</td>
<td>…</td>
</tr>
<tr class="even">
<td>0x8016</td>
<td><strong>your program</strong></td>
<td>H</td>
</tr>
<tr class="odd">
<td>0x8020</td>
<td><strong>your program</strong></td>
<td>e</td>
</tr>
<tr class="even">
<td>0x8024</td>
<td><strong>your program</strong></td>
<td>l</td>
</tr>
<tr class="odd">
<td>0x8028</td>
<td><strong>your program</strong></td>
<td>l</td>
</tr>
<tr class="even">
<td>0x8032</td>
<td><strong>your program</strong></td>
<td>o</td>
</tr>
<tr class="odd">
<td>0x8090-0x8400</td>
<td>Spotify</td>
<td>…</td>
</tr>
<tr class="even">
<td>0x8500</td>
<td><strong>your program</strong></td>
<td>10000</td>
</tr>
<tr class="odd">
<td>0x8504</td>
<td><strong>your program</strong></td>
<td>36912</td>
</tr>
<tr class="even">
<td>0x8600-0x9000</td>
<td>Safari</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>This is a simplified version showing a small range of memory. The important details:</p>
<ul>
<li>Each location in memory has a sequential <strong>address</strong> associated with it.</li>
<li>The memory is allocated in blocks of a standard size (here I am using 4 byte blocks).</li>
<li>Programs are not guaranteed <strong>contiguous</strong> memory, both your program and Safari have disjoint chunks of memory.</li>
<li>It is often faster to access contiguous memory than to seek around at random within this space.</li>
</ul>
<p>An <strong>array</strong> is a data structure that consists of a block of contiguous memory to store many similar items near one another.</p>
<p>In a language where we can request specifically sized blocks of memory (such as <strong>C</strong>) you might have:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// this is C code, not Python</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> my_array<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This would allocate memory owned by your program in a contiguous block of 5 integers:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Address</th>
<th>Contents</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0x10000</td>
<td>1</td>
<td></td>
</tr>
<tr class="even">
<td>0x10004</td>
<td>2</td>
<td></td>
</tr>
<tr class="odd">
<td>0x10008</td>
<td>3</td>
<td></td>
</tr>
<tr class="even">
<td>0x10012</td>
<td>4</td>
<td></td>
</tr>
<tr class="odd">
<td>0x10016</td>
<td>5</td>
<td></td>
</tr>
</tbody>
</table>
<p>The variable <code>array</code> would track the starting address, here <code>0x10000</code>.</p>
<p>Code that reads or sets a particular value such as <code>my_array[3] = 100</code> then needs to compute the <em>offset</em>.</p>
<p>Since we have <strong>contiguous memory</strong> and a <strong>fixed block size</strong> (of 4 bytes for an integer) the language can perform these operations in constant <span class="math inline">\(O(1)\)</span> time.</p>
<p><code>memory_location = initial_offset + block_size * index</code></p>
<p>So to find <code>my_array[3]</code> that would be:</p>
<p><code>memory_location = 0x10000 + 4 * 3 = 0x10012</code></p>
<p><em>This is why arrays are zero-indexed!</em> The first box with <code>index=0</code> becomes <code>initial_offset + block_size * 0</code>, or just <code>initial_offset</code>.</p>
<p>Each array will have its own <code>initial_offset</code> and <code>block_size</code>, the latter determined by the type of data being stored.</p>
<section id="pythons-list" class="level3">
<h3 class="anchored" data-anchor-id="pythons-list">Python’s <code>list</code></h3>
<p>In Python, <code>list</code> is implemented as an array.</p>
<p>It has two properties that not all arrays share however:</p>
<ol type="1">
<li>It can store items of <em>heterogeneous</em> type.</li>
<li>It can expand as needed, we do not need to pre-define how many elements are in the list.</li>
</ol>
<p>Arrays must have fixed block sizes for the arithmetic above to work, this seems like it may pose problems for both of these use cases.</p>
<p>To allow heterogeneous data (including data that may change size), the object stored in each cell of the array is a C type (called <code>PyObject</code>) that we do not interact with directly from Python.</p>
<p>Instead of each box storing the actual value, they store the <code>PyObject</code>, which in turn stores a pointer or reference to the actual data, which will be stored elsewhere:</p>
<p><img src="python-list.png" class="img-fluid"></p>
<p>Now instead of a direct lookup, the index-based lookup returns the address of the actual data. This remains <span class="math inline">\(O(1)\)</span> since this extra step is a constant operation, and will not take more time as the number of items grows.</p>
<p>Allowing an array to grow takes another trick: we are going to over-allocate memory.</p>
<p>When you create a new list Python allocates a block of memory that is large enough to hold the list, and then some extra space.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The language might allocate eight memory blocks instead of three.</p>
<p>Note 1: Numbers for illustration only, implementation details will vary.</p>
<p>Note 2: I am not showing the extra level of indirection here, instead using the notation <code>-&gt; 1</code> to remind you that the data stored in that block is not the actual value, but a reference to it.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Address</th>
<th>Contents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0x5000</td>
<td>–&gt; 1</td>
</tr>
<tr class="even">
<td>0x5004</td>
<td>–&gt; 2</td>
</tr>
<tr class="odd">
<td>0x5008</td>
<td>–&gt; 3</td>
</tr>
<tr class="even">
<td>0x5012</td>
<td></td>
</tr>
<tr class="odd">
<td>0x5016</td>
<td></td>
</tr>
<tr class="even">
<td>0x5020</td>
<td></td>
</tr>
<tr class="odd">
<td>0x5024</td>
<td></td>
</tr>
<tr class="even">
<td>0x5028</td>
<td></td>
</tr>
</tbody>
</table>
<p>Now when you call <code>x.append(4)</code>, Python has room for it already.</p>
<p>This keeps the operation <span class="math inline">\(O(1)\)</span>, but at the cost of keeping around some empty blocks of memory.</p>
<p>But this would only allow our lists to grow up to this arbitrary capacity. What happens in practice is that Python will grow the <strong>capacity</strong> when some threshold is exceeded.</p>
<p>In our hypothetical list, we are now using four of the allocated eight blocks.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>x.append(<span class="dv">5</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>x.append(<span class="dv">6</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>x.append(<span class="dv">7</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>x.append(<span class="dv">8</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>x.append(<span class="dv">9</span>) <span class="co"># what happens?!</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>As we know, this code will run fine! Python tracks how many cells are used, and if an insertion would cause the capacity to be exceeded it <strong>moves the entire list</strong>.</p>
<p>It cannot just expand in place, since the adjacent memory is likely used by other variables or even other programs. This means that the occasional insertion does need to do more work, copying the list over to a new block of <strong>contiguous memory</strong>.</p>
<p>So after the additional insertions our list may have had it’s items moved, and new additional capacity allocated:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Address</th>
<th>Contents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0x9100</td>
<td>–&gt; 1</td>
</tr>
<tr class="even">
<td>0x9104</td>
<td>–&gt; 2</td>
</tr>
<tr class="odd">
<td>0x9108</td>
<td>–&gt; 3</td>
</tr>
<tr class="even">
<td>0x9112</td>
<td>–&gt; 4</td>
</tr>
<tr class="odd">
<td>0x9116</td>
<td>–&gt; 5</td>
</tr>
<tr class="even">
<td>0x9120</td>
<td>–&gt; 6</td>
</tr>
<tr class="odd">
<td>0x9124</td>
<td>–&gt; 7</td>
</tr>
<tr class="even">
<td>0x9128</td>
<td>–&gt; 8</td>
</tr>
<tr class="odd">
<td>0x9128</td>
<td>–&gt; 9</td>
</tr>
<tr class="even">
<td>0x9128</td>
<td></td>
</tr>
<tr class="odd">
<td>0x9128</td>
<td></td>
</tr>
<tr class="even">
<td>0x9128</td>
<td></td>
</tr>
</tbody>
</table>
<p>Notice it again over allocates. Because this move can be expensive, it will add additional padding so that the next move does not come right away.</p>
<p>Because lists (arrays) are typically accessed much more often than they grow, this is a good trade-off in most cases.</p>
<p>In practice, the amount of padding that Python adds would affect the <strong>memory usage vs.&nbsp;performance</strong> of this data structure.</p>
</section>
</section>
<section id="linked-lists" class="level2">
<h2 class="anchored" data-anchor-id="linked-lists">Linked Lists</h2>
<p>In Python we typically use a <code>list</code> or <code>tuple</code> to store an <em>ordered sequence</em> of items. This is contrasted with an unordered collection, such as a <code>set</code>.</p>
<p>There is another data structure that is useful for <em>ordered sequences</em>:</p>
<p><strong>Linked lists</strong> are ordered collections of items, but use non-contiguous memory.</p>
<p>Each item in the list contains a pointer to the next item in the list.</p>
<div id="c4946ce1" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data-structures/linked_list.py</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Node:</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, value, <span class="bu">next</span><span class="op">=</span><span class="va">None</span>): </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.value <span class="op">=</span> value</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.<span class="bu">next</span> <span class="op">=</span> <span class="bu">next</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LinkedList:</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.root <span class="op">=</span> <span class="va">None</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__len__</span>(<span class="va">self</span>):</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        cur <span class="op">=</span> <span class="va">self</span>.root</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> cur <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            cur <span class="op">=</span> cur.<span class="bu">next</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> append(<span class="va">self</span>, value):</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># new tail node</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        new <span class="op">=</span> Node(value)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># special case for first node</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.root <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.root <span class="op">=</span> new</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>            cur <span class="op">=</span> <span class="va">self</span>.root</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>            <span class="co"># iterate to end-1</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> cur.<span class="bu">next</span> <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                cur <span class="op">=</span> cur.<span class="bu">next</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>            <span class="co"># append node</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>            cur.<span class="bu">next</span> <span class="op">=</span> new</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> prepend(<span class="va">self</span>, value):</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>        <span class="co"># add new node that points at old root</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>        new <span class="op">=</span> Node(value, <span class="va">self</span>.root)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.root <span class="op">=</span> new</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> <span class="st">""</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>        cur <span class="op">=</span> <span class="va">self</span>.root</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> cur:</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>            s <span class="op">+=</span> <span class="ss">f"</span><span class="sc">{</span>cur<span class="sc">.</span>value<span class="sc">}</span><span class="ss"> -&gt; "</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>            cur <span class="op">=</span> cur.<span class="bu">next</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>        s <span class="op">+=</span> <span class="st">"END"</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> s</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>ll <span class="op">=</span> LinkedList()</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>ll.append(<span class="dv">1</span>)</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>ll.append(<span class="dv">2</span>)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>ll.prepend(<span class="dv">0</span>)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>ll.prepend(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>ll.append(<span class="dv">3</span>)</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ll)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>-1 -&gt; 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; END</code></pre>
</div>
</div>
<p>To use an implementation of a <strong>doubly-linked list</strong>, we use <code>collections.deque</code>.</p>
<p>This stores forward &amp; backward references allowing bidirectional traversal at a slightly higher cost.</p>
<section id="linked-list-vs.-array" class="level3">
<h3 class="anchored" data-anchor-id="linked-list-vs.-array">Linked List vs.&nbsp;Array</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Linked List</th>
<th>Array</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Access by Index</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>Insert/Delete at Start</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>Insert/Delete at End</td>
<td>O(1)</td>
<td>O(1)*</td>
</tr>
<tr class="even">
<td>Insert/Delete at Middle</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>It is also common to have a doubly-linked list, where each item contains a pointer to the next item and the previous item.</p>
</section>
</section>
<section id="stacks" class="level2">
<h2 class="anchored" data-anchor-id="stacks">Stacks</h2>
<p>One of the most common data structures is the stack.</p>
<p>A stack is a data structure that enables Last In, First Out processing.</p>
<p>LIFO means that the last item added to the stack is the first item removed.</p>
<p>The common analogy is a stack of plates.</p>
<p>You also deal with a stack whenever calling functions: the last function called is the first to return.</p>
<p>Insertions &amp; deletions happen on the same end of the data structure.</p>
<section id="call-stack-example" class="level3">
<h3 class="anchored" data-anchor-id="call-stack-example">Call Stack Example</h3>
<div id="21bcf2f8" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> a():</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"a on call stack"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    b()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"a off call stack"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> b():</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"  b on call stack"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    c()</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"  b off call stack"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> c():</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"    c on call stack"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"    c off call stack"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>a()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>a on call stack
  b on call stack
    c on call stack
    c off call stack
  b off call stack
a off call stack</code></pre>
</div>
</div>
<p><strong>What data structure is best for a stack?</strong></p>
</section>
<section id="example-implementation" class="level3">
<h3 class="anchored" data-anchor-id="example-implementation">Example Implementation</h3>
<div id="272e27f2" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Stack:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="co"># because it is faster to add/remove at the end of a list</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># we'll treat the end of the list as the top of the stack</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.items <span class="op">=</span> []</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> push(<span class="va">self</span>, item):</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.items.append(item)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> pop(<span class="va">self</span>):</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.items.pop()</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Return a string representation of the stack."""</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        output <span class="op">=</span> []</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        output.append(<span class="ss">f"[ </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>items[<span class="op">-</span><span class="dv">1</span>]<span class="sc">}</span><span class="ss"> ] &lt;- top"</span>)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> item <span class="kw">in</span> <span class="bu">reversed</span>(<span class="va">self</span>.items[:<span class="op">-</span><span class="dv">1</span>]):</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>            output.append(<span class="ss">f"[ </span><span class="sc">{</span>item<span class="sc">}</span><span class="ss"> ]"</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(output)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="4390659c" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>stack <span class="op">=</span> Stack()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>stack.push(<span class="dv">1</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>stack.push(<span class="dv">2</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>stack.push(<span class="dv">3</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stack)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[ 3 ] &lt;- top
[ 2 ]
[ 1 ]</code></pre>
</div>
</div>
<p>How would a linked list perform?</p>
</section>
</section>
<section id="queues" class="level2">
<h2 class="anchored" data-anchor-id="queues">Queues</h2>
<p>In a queue, the first item added is the first item removed. First In, First Out, or FIFO.</p>
<p>The common analogy is a line at a grocery store.</p>
<p>Insertions &amp; deletions happen on opposite ends of the data structure.</p>
<p>What data structure is best for a queue?</p>
<section id="example-implementation-1" class="level3">
<h3 class="anchored" data-anchor-id="example-implementation-1">Example Implementation</h3>
<div id="01f8e894" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ArrayQueue:</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, _iterable<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> _iterable:</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>._data <span class="op">=</span> <span class="bu">list</span>(_iterable)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>._data <span class="op">=</span> []</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> push(<span class="va">self</span>, item):</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># adding to the end of the list is faster than the front</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._data.append(item)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> pop(<span class="va">self</span>):</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># only change from `Stack` is we remove from the other end</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># this can be slower, why?</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>._data.pop(<span class="dv">0</span>)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__len__</span>(<span class="va">self</span>):</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">len</span>(<span class="va">self</span>._data)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">" TOP -&gt; "</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">        "</span>.join(</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"[ </span><span class="sc">{</span>item<span class="sc">}</span><span class="ss"> ]"</span> <span class="cf">for</span> item <span class="kw">in</span> <span class="bu">reversed</span>(<span class="va">self</span>._data)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="91038823" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> deque</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DequeQueue:</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, _iterable<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> _iterable:</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>._data <span class="op">=</span> deque(_iterable)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>._data <span class="op">=</span> deque()</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> push(<span class="va">self</span>, item):</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._data.append(item)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> pop(<span class="va">self</span>):</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>._data.popleft()</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__len__</span>(<span class="va">self</span>):</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">len</span>(<span class="va">self</span>._data)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">" TOP -&gt; "</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">        "</span>.join(</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>            <span class="ss">f"[ </span><span class="sc">{</span>item<span class="sc">}</span><span class="ss"> ]"</span> <span class="cf">for</span> item <span class="kw">in</span> <span class="bu">reversed</span>(<span class="va">self</span>._data)</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="testing-queue-performance" class="level3">
<h3 class="anchored" data-anchor-id="testing-queue-performance">Testing Queue Performance</h3>
<div id="d633df08" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> timeit</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>number <span class="op">=</span> <span class="dv">1_000_000</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>elapsed <span class="op">=</span> timeit.timeit(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"queue.push(1)"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    setup<span class="op">=</span><span class="st">"queue = QueueCls()"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">globals</span><span class="op">=</span>{<span class="st">"QueueCls"</span>: ArrayQueue},</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    number<span class="op">=</span>number,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>elapsed2 <span class="op">=</span> timeit.timeit(</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"queue.push(1)"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    setup<span class="op">=</span><span class="st">"queue = QueueCls()"</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">globals</span><span class="op">=</span>{<span class="st">"QueueCls"</span>: DequeQueue},</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    number<span class="op">=</span>number,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>number<span class="sc">}</span><span class="ss">x ArrayQueue.push, took"</span>, elapsed)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>number<span class="sc">}</span><span class="ss">x DequeQueue.push, took"</span>, elapsed2)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"DequeQueue is </span><span class="sc">{</span>(elapsed<span class="op">-</span>elapsed2) <span class="op">/</span> elapsed <span class="op">*</span> <span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">% faster"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>1000000x ArrayQueue.push, took 0.020331165986135602
1000000x DequeQueue.push, took 0.021147500025108457
DequeQueue is -4.015% faster</code></pre>
</div>
</div>
<div id="d29210c0" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>number <span class="op">=</span> <span class="dv">10_000</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>elapsed <span class="op">=</span> timeit.timeit(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"queue.pop()"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    setup<span class="op">=</span><span class="st">"queue = QueueCls([0] * 1000000)"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">globals</span><span class="op">=</span>{<span class="st">"QueueCls"</span>: ArrayQueue},</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    number<span class="op">=</span>number,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>elapsed2 <span class="op">=</span> timeit.timeit(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"queue.pop()"</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    setup<span class="op">=</span><span class="st">"queue = QueueCls([0] * 1000000)"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">globals</span><span class="op">=</span>{<span class="st">"QueueCls"</span>: DequeQueue},</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    number<span class="op">=</span>number,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>number<span class="sc">}</span><span class="ss">x ArrayQueue.pop, took"</span>, elapsed)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>number<span class="sc">}</span><span class="ss">x DequeQueue.pop, took"</span>, elapsed2)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"DequeQueue is </span><span class="sc">{</span>(elapsed<span class="op">-</span>elapsed2) <span class="op">/</span> elapsed <span class="op">*</span> <span class="dv">100</span><span class="sc">:.3f}</span><span class="ss">% faster"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>10000x ArrayQueue.pop, took 1.1310574589297175
10000x DequeQueue.pop, took 0.00019958405755460262
DequeQueue is 99.982% faster</code></pre>
</div>
</div>
</section>
<section id="queue-performance" class="level3">
<h3 class="anchored" data-anchor-id="queue-performance">Queue Performance</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>ArrayQueue</th>
<th>DequeQueue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>push</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>pop</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="hash-tables" class="level2">
<h2 class="anchored" data-anchor-id="hash-tables">Hash Tables</h2>
<p>A hash table is a data structure that maps a unique identifying key with some associated value.</p>
<p>A <code>dict</code> is an implementation of a hash table.</p>
<p>If all we wanted to do was associate items with keys, we could store a list of <code>(key, value)</code> tuples in a list.</p>
<p>Then to look up an item, we would search the list by iterating through and looking for the <code>key</code>. This would be <span class="math inline">\(O(N)\)</span> (or <span class="math inline">\(O(\log N)\)</span> if we can keep the table sorted).</p>
<p>Looking up items in a hash table or dictionary is an important task, almost everything in Python relies on the performance of dictionaries.</p>
<p>As we’ll see, we can instead write algorithms that will make modifying &amp; accessing individual hash table cells <span class="math inline">\(O(1)\)</span>.</p>
<section id="hashing" class="level3">
<h3 class="anchored" data-anchor-id="hashing">Hashing</h3>
<p>A key piece of writing a hash table is to use a <strong>hashing function</strong>.</p>
<p>This is a function that will convert a value (often a string) to an arbitrary but consistent integer.</p>
<p>To see how this will help, let’s first model a simple hash table with fixed capacity of 10 using a list of 10 empty elements:</p>
<div id="99b85670" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>capacity <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>storage <span class="op">=</span> [<span class="va">None</span>] <span class="op">*</span> capacity</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For simplicity we’ll stick to string keys.</p>
<p>When we get a key-value pair, we need to assign it a bucket.</p>
<p>How can we write a function that takes a string and assigns it to a bucket?</p>
<ol type="1">
<li>Turn the string into a number. This is our <strong>hash function</strong></li>
<li>Take (number % capacity) and assign the item to that cell in our array.</li>
</ol>
<p>For example:</p>
<div id="2d869d8c" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> strhash(key):</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ord converts a character to it's numeric representation</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   ord("A") == 65</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   ord("z") == 122</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># etc.</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(<span class="bu">ord</span>(letter) <span class="cf">for</span> letter <span class="kw">in</span> key)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="c3c2a591" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> (<span class="st">"bear"</span>, <span class="st">"fox"</span>):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"strhash(</span><span class="sc">{</span>word<span class="sc">}</span><span class="ss">) ="</span>, strhash(word), <span class="st">"    % 10 = "</span>, strhash(word) <span class="op">%</span> <span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>strhash(bear) = 410     % 10 =  0
strhash(fox) = 333     % 10 =  3</code></pre>
</div>
</div>
<p>So we would store our items in cells 0 and 3.</p>
<div id="734e1f82" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we can use the numeric indices from our hash to read and write from storage</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>storage[strhash(<span class="st">"bear"</span>) <span class="op">%</span> capacity] <span class="op">=</span> <span class="st">"cub"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>storage[strhash(<span class="st">"fox"</span>) <span class="op">%</span> capacity] <span class="op">=</span> <span class="st">"kit"</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> (<span class="st">"bear"</span>, <span class="st">"fox"</span>):</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"A baby </span><span class="sc">{</span>word<span class="sc">}</span><span class="ss"> is called a </span><span class="sc">{</span>storage[strhash(word) <span class="op">%</span> capacity]<span class="sc">}</span><span class="ss">."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>A baby bear is called a cub.
A baby fox is called a kit.</code></pre>
</div>
</div>
</section>
<section id="collisions" class="level3">
<h3 class="anchored" data-anchor-id="collisions">Collisions</h3>
<p>If two pieces of data hash to the same value (modulo capacity), we have a <strong>collision</strong>. Attempting to store the key ‘kangaroo’ would generate such a collision:</p>
<div id="742f8e1f" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"strhash('kangaroo') % 10 = "</span>, strhash(<span class="st">"kangaroo"</span>) <span class="op">%</span> capacity)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>storage[strhash(<span class="st">"kangaroo"</span>) <span class="op">%</span> capacity] <span class="op">=</span> <span class="st">"joey"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="bu">str</span>(storage))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>strhash('kangaroo') % 10 =  0

['joey', None, None, 'kit', None, None, None, None, None, None]</code></pre>
</div>
</div>
<p>We’ve overwritten “cub” with “joey”!</p>
<p>While a better hash function might have spread these values out more in the table, no matter what we’ll eventually see collisions.</p>
<p>The second thing we’ll need in addition to our hash function is <strong>collision resolution</strong>.</p>
</section>
<section id="collision-resolution" class="level3">
<h3 class="anchored" data-anchor-id="collision-resolution">Collision Resolution</h3>
<p>Like hash functions, we have choices available to us.</p>
<p>The two most common solutions are <strong>separate chaining</strong> and <strong>open addressing</strong>.</p>
<p><strong>Separate Chaining</strong></p>
<p>In this approach each hash cell itself contains a linked list. (Our underlying structure is then an array of lists.)</p>
<p>Whenever two keys collide, we will just append the new (key, value) pair to the end of the list.</p>
<p>TODO: draw picture</p>
<p>The other family of approaches is <em>open addressing</em>.</p>
<p>This approach includes many algorithms that resolve the collision by picking a new location within the still-flat array, but we will focus on <strong>linear probing</strong>.</p>
<p>When attempting to write to a key that collided, we will look and see if the next cell is open, and if not that, the next, and so on.</p>
<div id="20287f69" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: this implementation is intentionally incomplete!</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> set_with_linear_probe(ht_storage, key, value):</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">""" add a key to our hash table using linear probing algorithm """</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    capacity <span class="op">=</span> <span class="bu">len</span>(ht_storage)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> strhash(key) <span class="op">%</span> capacity</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># search until a space is found</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span> ht_storage[index] <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>          <span class="co"># a space has been found, add and exit the loop</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>          ht_storage[index] <span class="op">=</span> value</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>       <span class="cf">else</span>:</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>          <span class="co"># move forward looking for space</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>          index <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, when we see a collision, we walk forward a step.</p>
<div id="ca3cfefb" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>storage <span class="op">=</span> [<span class="va">None</span>] <span class="op">*</span> <span class="dv">10</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>set_with_linear_probe(storage, <span class="st">"bear"</span>, <span class="st">"cub"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>set_with_linear_probe(storage, <span class="st">"fox"</span>, <span class="st">"kit"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>set_with_linear_probe(storage, <span class="st">"kangaroo"</span>, <span class="st">"joey"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(storage)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>['cub', 'joey', None, 'kit', None, None, None, None, None, None]</code></pre>
</div>
</div>
<p>‘joey’ is now stored in the second index, since index 0 was full.</p>
<p>TODO: show storing keys as well</p>
<p><strong>When does this still fail?</strong></p>
<hr>
<ol type="1">
<li><p>If the <code>hash</code> value is near the end of the list, it may reach the end before finding a space. In this case, we wrap around, if there is no room to move forward in the list we loop back to index zero, similarly to how our <code>% capacity</code> operation works.</p></li>
<li><p>Eventually however, there will not be any room left in the hashtable.</p></li>
</ol>
</section>
<section id="resizing-rehashing" class="level3">
<h3 class="anchored" data-anchor-id="resizing-rehashing">Resizing &amp; Rehashing</h3>
<p>Like Python’s <code>list</code>, we will maintain some empty cells, additional <em>capacity</em> beyond what is being stored.</p>
<p>It is tempting to just grow the capacity:</p>
<p><code>ht_storage += [None] * 10</code></p>
<p><strong>But what happens if we do this?</strong></p>
<p>All of our access rules are based upon <code>hash % capacity</code>!</p>
<div id="09ff5385" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"strhash('bear') % 10 = "</span>, strhash(<span class="st">"bear"</span>) <span class="op">%</span> <span class="dv">10</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"strhash('bear') % 20 = "</span>, strhash(<span class="st">"bear"</span>) <span class="op">%</span> <span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>strhash('bear') % 10 =  0
strhash('bear') % 20 =  10</code></pre>
</div>
</div>
<p>With positions 11-19 now available, the correct location for items will have changed.</p>
<p>Since we use the hash to look items up as well as set them, this means that items would go missing if capacity changed!</p>
<p>Instead, we have to <strong>rehash</strong>.</p>
<p>This means we need to go through all items &amp; compute new hashes whenever we resize.</p>
<p><strong>When to rehash?</strong></p>
<p>In practice, we will want to keep our usage close to 50% of our capacity.</p>
<p>If you were to wait until the number of items was very close to capacity, the linear probing would be on average <span class="math inline">\(O(N)\)</span>.</p>
<p>Consider the case where our capacity is 10 and we have 9 items already.</p>
<p>It would seek forward, but all but one cell would be occupied, so it would be searching through <span class="math inline">\(O(N)\)</span> spots. (In truth closer to N/2, but still <span class="math inline">\(O(N)\)</span> growth.)</p>
<p>With 50% capacity, and a <strong>good hash function</strong> that evenly spreads items through our table, it would typically only step forward 0 or 1 space, keeping average runtime close to <span class="math inline">\(O(1)\)</span>.</p>
</section>
<section id="hash-table-performance" class="level3">
<h3 class="anchored" data-anchor-id="hash-table-performance">Hash Table Performance</h3>
<p>The performance of our hash table is determined by the algorithms we choose for our hash function and collision resolution.</p>
<p>We are aiming for average performance of <span class="math inline">\(O(1)\)</span>, but there will be cases that become <span class="math inline">\(O(N)\)</span> as we’ve seen.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Operation</th>
<th>Average</th>
<th>Worst Case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>lookup</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>insert</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>delete</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
</tbody>
</table>
<p>A key property for hash tables is that we <strong>do not need to linearly search through them for our data</strong>.</p>
<p>If you find yourself scanning every element in a hash table, you’re doing something wrong.</p>
</section>
<section id="polynomial-hash-function" class="level3">
<h3 class="anchored" data-anchor-id="polynomial-hash-function">Polynomial Hash Function</h3>
<p>A good hash function will evenly distribute values across the collection.</p>
<p>This can be visualized by imagining the worst possible hash function:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> badhash(key):</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">7000</span>  <span class="co"># every key hashes to same value</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This maximizes our collisions. While we can resolve this with linear probing, we wind up with a situation where each item is just stored in the next available spot, and we’re back to <span class="math inline">\(O(N)\)</span> run time.</p>
<p>The <code>strhash</code> we defined above isn’t much better in practice: strings tend to be short and use common letters.</p>
<p><code>strhash("cat")</code> == <code>strhash("act")</code></p>
<p>and</p>
<p><code>strhash("car")</code> is just two away from to <code>strhash("cat")</code></p>
<p>Performance will improve if our hash function distributes the values more evenly.</p>
<p>A common pattern is to use a polynomial hash function.</p>
<p><span class="math display">\[h(x_0, ..., x_n) = (\sum_{i=0}^{k-1}{c_ip^i})\mod{m}\]</span></p>
<p>Where: - $x_0…x_i $ is the sequence - <span class="math inline">\(k = len(x)\)</span> - <span class="math inline">\(c_i\)</span> is the numeric value of the character <span class="math inline">\(x_i\)</span> (<span class="math inline">\(ord(x\)</span> in Python) - <span class="math inline">\(p\)</span> is an arbitrary constant. - and <span class="math inline">\(m\)</span> is the size of the collection.</p>
<p>An effective approach is to use Horner’s method to compute a polynomial whose coefficients are the integer values of the characters in a string:</p>
<p><span class="math display">\[
p(x) = a_0 + a_1x + a_2x^2 + a_3x^3 + ... + a_nx^n
\]</span></p>
<p>which, via Horner’s rule is the same as:</p>
<p><span class="math display">\[
= a_0 + x ( a_1 + x ( a_2 + x( a_3 + ... + x ( a_{n-1} + xa_n) ... )))
\]</span></p>
<p>Where <span class="math inline">\(a_i\)</span> is the integer value for the character at position <span class="math inline">\(i\)</span> in the string and <span class="math inline">\(x\)</span> is a prime constant integer.</p>
<p>In Python:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>multiplier <span class="op">=</span> <span class="dv">37</span> <span class="co"># prime</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>hash_value <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>hash_value <span class="op">=</span> (hash_value <span class="op">*</span> multiplier <span class="op">+</span> <span class="bu">ord</span>(<span class="st">"a"</span>))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>hash_value <span class="op">=</span> (hash_value <span class="op">*</span> multiplier <span class="op">+</span> <span class="bu">ord</span>(<span class="st">"b"</span>))</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>hash_value <span class="op">=</span> (hash_value <span class="op">*</span> multiplier <span class="op">+</span> <span class="bu">ord</span>(<span class="st">"c"</span>))</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>hash_value <span class="op">=</span> hash_value <span class="op">%</span> <span class="va">self</span>._capacity</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="further-exploration" class="level2">
<h2 class="anchored" data-anchor-id="further-exploration">Further Exploration</h2>
<ul>
<li><a href="https://visualgo.net/en/hashtable?slide=1">Hash Table Visualization</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../packages/index.html" class="pagination-link" aria-label="Python Packages">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Python Packages</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../testing/index.html" class="pagination-link" aria-label="Testing">
        <span class="nav-page-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Testing</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>